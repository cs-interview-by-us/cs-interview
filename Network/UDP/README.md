# UDP(User Datagram Protocol)  
  
## UDP란?  
- 데이터를 데이터그램 단위로 처리하는 프로토콜  
- 전송계층의 __비열결 지향적__ 프로토콜  
- 전송계층(송신자와 수신자를 연결하는 통신서비스를 제공하는 계층)은 데이터의 전달을 담당하는데 데이터를 전달하기 위해 사용하는 프로토콜 중 하나  
  
## UDP (+TCP의) 탄생배경  
> - IP의 역할은 Host to Host(장치 to 장치)만을 지원  
> - 하나의 장치안에서 수많은 프로그램들이 통신을 할 경우에는 IP만으로는 한계 존재  
-> 이것을 해결하기 위하여 ```포트 번호```가 탄생  
  
> - IP에서 오류가 발생한다면 ICMP에서 알려줌  
> - ICMP는 알려주기만 할 뿐 대처를 못하기 때문에 IP보다 위에서 처리 필요  
> -> 이것을 해결하기 위해 상위 프로토콜인 ```TCP```와 ```UDP``` 탄생  
>  
> ```ICMP``` : 인터넷 제어 메시지 프로토콜. 네트워크 컴퓨터 위에서 돌아가는 운영체제에서 오류 메시지를 전송받는데 주로 쓰임  
  
### 그렇다면 TCP와 UDP가 어떻게 오류를 해결하는가?  
#### TCP의 경우  
- 데이터의 분실, 중복, 순서가 뒤바뀜 등을 자동으로 보정해줘서 송수신 데이터의 정확한 전달을 할 수 있도록 함  
  
#### UDP의 경우  
- IP가 제공하는 정도의 수준만을 제공하는 간단한 IP 상위 계층의 프로토콜  
- TCP와는 다르게 에러가 날 수도 있고, 재전송이나 순서가 뒤바뀔 수도 있어서 이 경우, 어플리케이션에서 처리하는 번거로움이 존재  
  
## UDP 특징  
- 비연결형 서비스로 데이터그램 방식을 제공  
- 정보를 주고 받을 때 정보를 보내거나 받는다는 신호절차를 거치지 X  
- UDP Header의 ```CheckSum``` 필드를 통해 최소한의 오류만 검출  
- 신뢰성 낮음 (데이터 재전송X, 데이터 순서 유지를 위한 작업 X)  
- 패킷 오버헤드가 적어 네트워크 부하가 감소  
- 상대적으로 TCP보다 전송속도가 빠름  
- 연속성이 중요한 서비스(streaming) 등에 자주 사용  
  
## UDP 동작 과정  
![](https://velog.velcdn.com/images/imeyh/post/501f09f5-b1ac-4821-801b-53d0e51d207c/image.png)  
- UDP는 연결이란 개념이 존재하지 않기 때문에 ```listen```, ```connect```, ```accept``` 함수 필요 X  

<br>

![](https://velog.velcdn.com/images/imeyh/post/ce2505ea-c9fc-4b3f-ad15-3b79fe518a0e/image.png)  
  
1. ```UDP```는 해당 프로세스를 식별할 수 있는 포트(프로세스가 시작되면 프로세스는 운영 체제로부터 포트 번호 부여받음)와 통신하기 위해 버퍼 역할을 하는 두 개의 큐(Queue)를 만들고 연결  
- 송신용 목적인 ```송신 큐(Outgoing Queue)```, 수신용 목적인 ```수신 큐(Incoming Queue)```로 구분  
  
2. 프로세스에서 데이터를 외부로 전송하기 위해 ```송신 큐(Outgoing Queue)```에 데이터를 밀어넣으면, ```UDP```는 프로세스에서 보낸 데이터를 하나씩 읽고 헤더를 붙여서 3계층(IP)으로 넘겨준 후 ```송신 큐(Outgoing Queue)```에서 제거  
  
> ```송신 큐(Outgoing Queue)```에 무작정 막대한 데이터를 집어넣는다면?  
> -> 오버플로가 발생 가능  
> -> 보통 운영 체제에서는 ```송신 큐(Outgoing Queue)```에 오버플로가 발생하지 않도록 따로 관리  
  
3. ```수신 큐(Incoming Queue)```는 3계층(IP)에서 수신된 패킷이 있다면, 이를 분석하여 통신하고자 하는 프로세스의 포트 번호와 연결을 시도. 현재 컴퓨터에 해당 포트 번호를 가진 프로세스가 있다면 패킷에서 통신 과정에 필요했던 헤더 정보를 벗겨낸 후, 이를 해당 프로세스로 전송  
  
## 📖TCP(정확성) VS UDP(신속성)  
### TCP와 UDP의 공통점  
- 포트 번호를 이용하여 주소 지정  
- 데이터 오류 검사를 위한 체크섬 존재  
  
### TCP와 UDP의 차이점  
![](https://velog.velcdn.com/images/imeyh/post/7e2f64ea-21f1-4b01-b098-e774a96da19c/image.png)  
