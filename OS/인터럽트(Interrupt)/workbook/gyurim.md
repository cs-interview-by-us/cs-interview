# 인터럽트
### Q1. 인터럽트와 트랩의 차이점
```
인터럽트는 하드웨어에 의해 발생합니다. 프로그램 외부(I/O 장치, 디스크 등)에서 발생하며, 발생 시점이 일정하지 않기 때문에 비동기적입니다.

트랩은 소프트웨어에 의해 발생하는 인터럽트입니다. 프로그램 내부에서 일어나는 에러로 발생 시점이 프로그램의 일정한 지점이기 때문에 동기적입니다. 
(고정된 영역에서 일어남) 

트랩은 (1)예외와 (2)시스템 콜이 있는데 
(1) 예외는 메모리 참조 오류, 0으로 나누기, overflow, underflow 등의 경우에서 발생하는 인터럽트이고
(2) 시스템 콜은 사용자가 의도적으로 일으킨 인터럽트입니다. 

하드웨어는 System Bus를 통해 CPU에 신호를 보냄으로써 인터럽트를 발생시키고
소프트웨어는 System Call이라는 명령으로 인터럽트를 발생시킵니다. 
```


### Q2. 한컴오피스 ‘한글’을 클릭 후 빈 화면어 커서가 깜빡이고 있다. 이때 hello world를 작성하면 컴퓨터 내부에서 어떤일이 발생하는가?

#### Keyboard 
1. 키보드 밑에는 작은 고무가 있습니다. 이 고무를 누르게 되면 키보드 아래의 회로에 전자가 흐르게 되어, 키보드 내의 마이크로 컨트롤러가 신호를 인식하게 됩니다.
2. 이때 컨트롤러는 어느 키가 눌러졌는지(key down), 키가 올라갔는지(key up)를 판별하기 위한 정보인 Scan Code와 자신의 IO 번호를 OS에게 전달합니다.
3. 키보드는 I/O 장치로 시스템 버스를 통해 시그널이 전달됩니다. 
	- 소프트웨어 폴링, 하드웨어 폴링 등 구현법에 따라 다른데, 일반적으로 TEST I/O(IRA) 선을 통해 전달됩니다.

### OS
1. CPU는 Execute 명령이 끝날 때마다, 인터럽트 신호를 확인함으로써 이때 키보드에서 발생된 시그널을 확인하게 됩니다.
	- 이 시그널에는 Keyboard I/O 번호와 Scan Code가 담겨있습니다.
2. 인터럽트 신호를 확인한 CPU는 현재 정보들을 Stack에 저장합니다. -> Context Switching
3. 이후 Interrupt Service Routine(ISR)에게 제어권을 넘겨줍니다.
4. ISR에서는 Interrupt Vector를 확인하는데, 여기에는 인터럽트 번호와 해당 인터럽트를 처리할 핸들러의 주소가 Key-Value 형태로 저장이 되어있습니다. 여기에 저장된 핸들러 주소로 점프해서 키보드 인터럽트가 수행됩니다.
	- 인터럽트를 수행 중에 다른 인터럽트가 발생했을 때의 처리는 인터럽트마다 다릅니다. 다른 인터럽트 발생을 막으려면 인터럽트 시작 시에 다른 인터럽트가 끼어들지 못하게 인터럽트 금지 bit를 set합니다.
5. 키보드 인터럽트에서는 ScanCode를 ASCII Code로 변환해서 버퍼에 저장합니다. 
6. 이후, 원래의 프로세스러 복귀합니다. 키보드 시그널이 필요한 프로세스는 Queue에 저장된 ASCII Code를 가져와 로직을 수행합니다. 


### Q3. 폴링과 인터럽트에 대해 설명하시오
```
폴링: 컨트롤러가 특정한 일을 할 시기를 알기 위해 지속적으로 체크하는 것
인터럽트: CPU가 프로그램을 실행할 때 예기치 않은 상황이 발생한 경우, 현재 실행 중인 작업을 잠시 중단하는 것 

인터럽트가 발생하면 해당 인터럽트 처리 루틴을 먼저 수행 후 원래 프로그램으로 되돌아옵니다. 
```
